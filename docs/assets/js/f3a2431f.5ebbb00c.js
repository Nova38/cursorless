"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[82284],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return g}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),g=r,m=d["".concat(l,".").concat(g)]||d[g]||p[g]||i;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},82607:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return g},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var a=n(87462),r=n(63366),i=(n(67294),n(3905)),o=["components"],s={},l="Contributing",u={unversionedId:"contributing/CONTRIBUTING",id:"contributing/CONTRIBUTING",title:"Contributing",description:"Welcome! So glad you've decided to help make Cursorless better. Once you've",source:"@site/../docs/contributing/CONTRIBUTING.md",sourceDirName:"contributing",slug:"/contributing/",permalink:"/docs/contributing/",editUrl:"https://github.com/cursorless-dev/cursorless/edit/main/docs/../docs/contributing/CONTRIBUTING.md",tags:[],version:"current",frontMatter:{},sidebar:"contributing",next:{title:"Adding a new programming language",permalink:"/docs/contributing/adding-a-new-language"}},c={},p=[{value:"Initial setup",id:"initial-setup",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Steps",id:"steps",level:3},{value:"Running / testing extension locally",id:"running--testing-extension-locally",level:2},{value:"Code formatting",id:"code-formatting",level:2},{value:"Running docs site locally",id:"running-docs-site-locally",level:2},{value:"Adding tests",id:"adding-tests",level:2},{value:"Parse tree support",id:"parse-tree-support",level:2},{value:"Adding a new programming language",id:"adding-a-new-programming-language",level:3},{value:"Adding syntactic scope types to an existing language",id:"adding-syntactic-scope-types-to-an-existing-language",level:3},{value:"Testing Cursorless with a local version of the VSCode parse tree extension",id:"testing-cursorless-with-a-local-version-of-the-vscode-parse-tree-extension",level:3},{value:"Changing SVGs",id:"changing-svgs",level:2},{value:"SVG preprocessing script",id:"svg-preprocessing-script",level:3},{value:"Adding hat adjustments at finish",id:"adding-hat-adjustments-at-finish",level:3}],d={toc:p};function g(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"contributing"},"Contributing"),(0,i.kt)("p",null,"Welcome! So glad you've decided to help make Cursorless better. Once you've\nlearned how to ",(0,i.kt)("a",{parentName:"p",href:"#initial-setup"},"set up")," and ",(0,i.kt)("a",{parentName:"p",href:"#running--testing-extension-locally"},"run / test a local copy of the\nextension"),", you may want to check out the\n",(0,i.kt)("a",{parentName:"p",href:"api"},"Cursorless API docs")," to learn more about how Cursorless works. You may also find the ",(0,i.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/api"},"VSCode API docs")," helpful to learn about VSCode extension development."),(0,i.kt)("h2",{id:"initial-setup"},"Initial setup"),(0,i.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://git-scm.com/"},"Git")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nodejs.org/en/"},"Node.js")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://yarnpkg.com/"},"yarn"))),(0,i.kt)("h3",{id:"steps"},"Steps"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Clone ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/cursorless-dev/cursorless"},(0,i.kt)("inlineCode",{parentName:"a"},"cursorless")))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open the newly created ",(0,i.kt)("inlineCode",{parentName:"p"},"cursorless")," directory in VSCode")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Run the following in the terminal:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn\nyarn compile\nyarn init-launch-sandbox\n")),(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn init-launch-sandbox")," command creates a local sandbox containing a specific set of VSCode extensions that will be run alongside Cursorless when you launch Cursorless in debug or test mode. Please file an issue if you'd like to use additional extensions when debugging locally."))),(0,i.kt)("h2",{id:"running--testing-extension-locally"},"Running / testing extension locally"),(0,i.kt)("p",null,"In order to test out your local version of the extension or to run unit tests\nlocally, you need to run the extension in debug mode. To do so you need to run\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"workbench.action.debug.selectandstart"),' command in VSCode and then select either "Run\nExtension" or "Extension Tests".'),(0,i.kt)("h2",{id:"code-formatting"},"Code formatting"),(0,i.kt)("p",null,"We use ",(0,i.kt)("a",{parentName:"p",href:"https://pre-commit.com/"},(0,i.kt)("inlineCode",{parentName:"a"},"pre-commit"))," to automate autoformatting.\nAutoformatters will automatically run on PRs in CI, but you can also run them\nlocally or install pre-commit hooks as described in the\n",(0,i.kt)("a",{parentName:"p",href:"https://pre-commit.com/"},(0,i.kt)("inlineCode",{parentName:"a"},"pre-commit")," documentation"),"."),(0,i.kt)("h2",{id:"running-docs-site-locally"},"Running docs site locally"),(0,i.kt)("p",null,"Run the ",(0,i.kt)("inlineCode",{parentName:"p"},"workbench.action.debug.selectandstart"),' command and then select\n"Docusaurus Start (Debug)".'),(0,i.kt)("h2",{id:"adding-tests"},"Adding tests"),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/contributing/test-case-recorder"},"test-case-recorder.md"),"."),(0,i.kt)("h2",{id:"parse-tree-support"},"Parse tree support"),(0,i.kt)("h3",{id:"adding-a-new-programming-language"},"Adding a new programming language"),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/contributing/adding-a-new-language"},"docs"),"."),(0,i.kt)("h3",{id:"adding-syntactic-scope-types-to-an-existing-language"},"Adding syntactic scope types to an existing language"),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/docs/contributing/parse-tree-patterns"},"parse-tree-patterns.md"),"."),(0,i.kt)("h3",{id:"testing-cursorless-with-a-local-version-of-the-vscode-parse-tree-extension"},"Testing Cursorless with a local version of the VSCode parse tree extension"),(0,i.kt)("p",null,"First bundle the parse tree extension into a ",(0,i.kt)("inlineCode",{parentName:"p"},".vsix"),", using something like the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"cd ../vscode-parse-tree\nvsce package -o bundle.vsix\n")),(0,i.kt)("p",null,"Once you have your package then you can install it into the sandbox using the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"cd ../cursorless\ncode --extensions-dir .vscode-sandbox/extensions --install-extension ../vscode-parse-tree/bundle.vsix\n")),(0,i.kt)("h2",{id:"changing-svgs"},"Changing SVGs"),(0,i.kt)("h3",{id:"svg-preprocessing-script"},"SVG preprocessing script"),(0,i.kt)("p",null,"You'll probably want to run the following to make sure the SVGs have everything they need:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn run compile && node ./out/scripts/preprocessSvgHats.js\n")),(0,i.kt)("p",null,"This script will add dummy width, height and fill attributes as necessary to appease the regex in ",(0,i.kt)("inlineCode",{parentName:"p"},"Decorations.ts")),(0,i.kt)("h3",{id:"adding-hat-adjustments-at-finish"},"Adding hat adjustments at finish"),(0,i.kt)("p",null,"While tweaking, the easiest approach is probably to use the\n",(0,i.kt)("inlineCode",{parentName:"p"},"cursorless.individualHatAdjustments")," setting in your settings.json to change\nsize / alignment so you don't need to refresh every time. Once you're done, you\ncan paste the settings into ",(0,i.kt)("inlineCode",{parentName:"p"},"scripts/hatAdjustments/add.ts")," and run the following to get\nyour updates:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn run compile && node ./out/scripts/hatAdjustments/add.js\n")),(0,i.kt)("p",null,"If instead, you want to average your adjustments with those in main and see the differences to get to yours and main, you can paste the settings into ",(0,i.kt)("inlineCode",{parentName:"p"},"scripts/hatAdjustments/average.ts")," and run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn run compile && node ./out/scripts/hatAdjustments/average.js\n")))}g.isMDXComponent=!0}}]);